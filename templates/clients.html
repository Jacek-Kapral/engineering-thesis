{% extends "base.html" %}

{% block content %}

<div class="center-container">
    <h2>All Clients</h2>
</div>

<div class="center-container">
    <input type="text" id="filterInput" onkeyup="filterTable()" placeholder="Search for company names..">
</div>

<form>
    <table id="clientsTable" class="styled-table">
            <tr>
                <th scope="col">Tax ID</th>
                <th scope="col">Company</th>
                <th scope="col">City</th>
                <th scope="col">Postal Code</th>
                <th scope="col">Address</th>
                <th scope="col">Phone</th>
                <th scope="col">Email</th>
            </tr>
            {% for client in clients %}
            <tr>
                <td><a href="{{ url_for('edit_client', client_id=client.tax_id) }}">{{ client.tax_id }}</a></td>
                <td>{{ client.company }}</td>
                <td>{{ client.city }}</td>
                <td>{{ client.postal_code }}</td>
                <td>{{ client.address }}</td>
                <td>{{ client.phone }}</td>
                <td>{{ client.email }}</td>
                <td>
                    <a href="{{ url_for('client_printers', client_id=client.tax_id) }}">View Printers</a>
                </td>
            </tr>
            {% endfor %}
    </table>
</form>
<div class="button-group">
    <a href="/index"><button>Back</button></a>
</div>

<script>
function filterTable() {
  var input, filter, table, tr, td, i, txtValue;
  input = document.getElementById("filterInput");
  filter = input.value.toUpperCase();
  table = document.getElementById("clientsTable");
  tr = table.getElementsByTagName("tr");

  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[1];
    if (td) {
      txtValue = td.textContent || td.innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }       
  }
}
</script>

{% endblock %}