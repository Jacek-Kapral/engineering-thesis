{% extends "base.html" %}

{% block content %}

<div class="center-container">
  <h2>Add printer</h2>
</div>

<form method="POST">
  <div class="form-row">
    <div class="form-item">
      <label for="printer_serial_number">Printer Serial Number:<span class="required"> *</span></label>
      <input type="text" id="printer_serial_number" name="printer_serial_number" required pattern=".{9,}">
    </div>
    <div class="form-item">
      <label for="model">Printer Model:</label>
      <input type="text" id="model" name="model" required>
    </div>
  </div>
  <div class="form-row">
    <div class="form-item">
      <label for="counter_black">Counter Black:</label>
      <input type="number" id="counter_black" name="counter_black" value="0" min="0">
    </div>
    <div class="form-item">
      <label for="counter_color">Counter Color:</label>
      <input type="number" id="counter_color" name="counter_color" value="0" min="0">
    </div>
  </div>
  <div class="button-group">
    <input type="submit" value="Submit">
    <button type="button" onclick="window.location.href='/index'">Back</button>
  </div>
  <div><span class="required">*</span> - required field.</div>
</form>

<script>
  var printerModels = {{ printer_models | tojson | safe }};
  document.getElementById('printer_serial_number').addEventListener('input', function(e) {
      var prefix = e.target.value.slice(0, 4);
      if (!(prefix in printerModels)) {
          prefix = e.target.value.slice(0, 6);
      }
      var model = printerModels[prefix] || 'Unknown model';
      document.getElementById('model').value = model;
  });
</script>

{% endblock %}