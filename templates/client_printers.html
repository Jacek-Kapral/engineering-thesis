{% extends "base.html" %}

{% block content %}
<h2>Printers Assigned to Client: {{ client_name }}</h2>

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class="flashes">
    {% for message in messages %}
      <li>{{ message }}</li>
    {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

{% if printers %}
  <table class="table table-striped table-hover"> <!-- Add classes here -->
      <tr>
        <th>Serial Number</th>
        <th>Model</th>
        <th>Black Counter</th>
        <th>Color Counter</th>
        <th>Action</th> <!-- New column for the action link -->
      </tr>
      {% for printer in printers %}
        <tr>
          <td>{{ printer.serial_number }}</td>
          <td>{{ printer.model }}</td>
          <td>{{ printer.black_counter }}</td>
          <td>{{ printer.color_counter }}</td>
          <td>
            <a href="{{ url_for('new_service_request_for_printer', tax_id=printer.tax_id, printer_id=printer.id, printer_serial_number=printer.serial_number) }}">New Service Request</a>          </td> <!-- New cell for the action link -->
        </tr>
      {% endfor %}
  </table>
{% else %}
  <p>No printers assigned to this client.</p>
{% endif %}
{% endblock %}