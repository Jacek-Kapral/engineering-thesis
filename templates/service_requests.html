{% extends "base.html" %}

{% block content %}

<style>
  .styled-table th:nth-child(6) {
    width: 200px;
  }
</style>

<a href="{{ url_for('new_service_request') }}" class="tlbtn">New Service Request</a>


<div class="center-container">
  <h2>Active Service Requests</h2>
</div>

{% if service_requests %}
  <table class="styled-table">
      <tr>
        <th>Service Request</th>
        <th>Company</th>
        <th>Printer Serial Number</th>
        <th>Printer Model</th>
        <th>Date</th>
        <th>Assigned to:</th>
      </tr>
      {% for request in service_requests %}
      <tr>
        <td>{{ request.service_request }}</td>
        <td>{{ request.company }}</td>
        <td>{{ request.serial_number }}</td>
        <td>{{ request.model }}</td>
        <td>{{ request.request_date }}</td>
        <td>
          <form action="{{ url_for('assign_user') }}" method="post">
            <select name="user_id">
              {% for user in users %}
                <option value="{{ user.id }}" {% if user.id == request.assigned_to %}selected{% endif %}>{{ user.login }}</option>
              {% endfor %}
            </select>
            <input type="hidden" name="request_id" value="{{ request.id }}">
            <input type="submit" value="Assign">
          </form>
        </td>
      </tr>
  {% endfor %}
  </table>
{% else %}
  <p>No active service requests.</p>
{% endif %}

{% endblock %}